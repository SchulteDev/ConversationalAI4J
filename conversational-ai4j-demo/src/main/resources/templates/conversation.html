<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>ConversationalAI4J Demo</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <link rel="stylesheet" th:href="@{/css/conversation.css}"/>
</head>
<body>
<div class="container">
  <h1 th:text="${welcomeText}">ConversationalAI4J Demo</h1>

  <!-- Real-time Voice Chat Section -->
  <div class="voice-controls">
    <h3>ðŸŽ¤ Voice Chat</h3>
    <p>Hold to talk</p>

    <div class="status hidden" id="status"></div>

    <button class="btn btn-voice" disabled id="voice-btn">
      ðŸŽ¤
    </button>

    <div class="audio-player">
      <audio controls id="ai-response" style="display: none;">
        Your browser does not support the audio element.
      </audio>
    </div>

    <div class="response" id="transcription" style="display: none; background-color: #f0f8ff;">
      <strong>You said:</strong><br/>
      <span id="transcription-content"></span>
    </div>

    <div class="response" id="text-response" style="display: none;">
      <strong>AI Response:</strong><br/>
      <span id="text-response-content"></span>
    </div>

    <div>
      <button class="btn" id="connect-btn" onclick="connectVoiceStream()">Connect</button>
      <button class="btn" id="disconnect-btn" onclick="disconnectVoiceStream()"
              style="display: none;">Disconnect
      </button>
    </div>
  </div>

  <div class="divider">OR</div>

  <!-- Text Chat Section -->
  <form action="/send" method="post">
    <div class="form-group">
      <label for="message">Your Message:</label>
      <input id="message" name="message" required
             th:value="${message}" type="text"/>
    </div>

    <button class="btn" type="submit">Send Message</button>
  </form>

  <div class="response" th:if="${response}">
    <strong>Response:</strong><br/>
    <span th:text="${response}"></span>
  </div>
</div>

<script th:src="@{/js/voice-chat.js}"></script>

</body>
</html>
